
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Moran">
    <title>Archives - Moran</title>
    <meta name="author" content="Moran">
    
        <meta name="keywords" content="hexo,javascript,">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Moran">
<meta property="og:url" content="https://moran96.github.io/archives/index.html">
<meta property="og:site_name" content="Moran">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Moran">
<meta property="article:tag" content="hexo">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://moran96.github.io/assets/images/zhen.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-oxlnrw3wkyklbktskav5dbns6q6llh5cxjhjrh9zosxbpgotjzbt7sodyvld.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Moran
        </a>
    </div>
    
        
            <a
                class="header-right-icon open-algolia-search"
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <i class="fa fa-search fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/zhen.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Moran</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.baidu.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/liumoran@outlook.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/07/21/test-post/"
                            aria-label=": test_post"
                        >
                            test_post
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-07-21T11:20:54+08:00">
	
		    Jul 21, 2022
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/07/21/test-post/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a
                href="/2022/07/21/test-post/"
                aria-label=": test_post"
            >
                <div class="postShorten-thumbnailimg">
                    <img alt="" src=""/>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/07/21/3d/"
                            aria-label=": 3d sdk"
                        >
                            3d sdk
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-07-21T11:07:27+08:00">
	
		    Jul 21, 2022
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>[TOC]</p>
<h1 id="一-简介"><a href="#一-简介" class="headerlink" title="一. 简介"></a>一. 简介</h1><hr>
<h2 id="1-WebGL、Three、Babylon"><a href="#1-WebGL、Three、Babylon" class="headerlink" title="1. WebGL、Three、Babylon"></a>1. WebGL、Three、Babylon</h2><p>此处涉及原理性和技术选型问题，后续补充<br>WebGL 3D渲染原理<br>Three.js 内存泄漏问题以及优化方案<br>Babylon 最终技术选型</p>
<h2 id="2-功能"><a href="#2-功能" class="headerlink" title="2. 功能"></a>2. 功能</h2><p>![IMAGE](quiver-image-url/8282EAFE37AD7C783FAFED212FA6E9B9.jpg =583x597)</p>
<h1 id="二-结构"><a href="#二-结构" class="headerlink" title="二. 结构"></a>二. 结构</h1><hr>
<h2 id="1-SDK-目录结构"><a href="#1-SDK-目录结构" class="headerlink" title="1. SDK 目录结构"></a>1. SDK 目录结构</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── IMPORT.md 按需加载文档</span><br><span class="line">├── README.md README文档</span><br><span class="line">├── dist 打包目录</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   ├── sdk.js 最终输出的sdk文件</span><br><span class="line">│   └── stats.json 依赖关系预览JSON</span><br><span class="line">├── src 源码目录</span><br><span class="line">│   ├── index.html 用与开发的主界面</span><br><span class="line">│   ├── index.js 核心代码</span><br><span class="line">│   ├── legacy.js 按需加载文件</span><br><span class="line">│   ├── load.js 按需加载文件</span><br><span class="line">│   └── loadingBase64.js 加载动画</span><br><span class="line">├── package.json</span><br><span class="line">├── package-lock.json</span><br><span class="line">└── webpack.config.js</span><br></pre></td></tr></table></figure>


<h2 id="2-核心结构"><a href="#2-核心结构" class="headerlink" title="2. 核心结构"></a>2. 核心结构</h2><h3 id="2-1-整体结构"><a href="#2-1-整体结构" class="headerlink" title="2.1 整体结构"></a>2.1 整体结构</h3><p><code>/src/index.js</code> 的结构如下，包括loading配置和两个类：<code>CustomLoadingScreen</code> 和 <code>PLM</code></p>
<p>![IMAGE](quiver-image-url/A52125C7B4CC9A17A1913BC049016F60.jpg =345x183)</p>
<p>其中：</p>
<ul>
<li>defaultLoadingStyle 负责控制loading动画的样式和布局</li>
<li>defaultLoadingId 加载动画的uid 在一个屏幕内实例多个3D模型时启用</li>
<li><strong>CustomLoadingScreen</strong> 自定义加载器类，其属性和方法需要按照 <code>Babylon</code> 的文档要求来实现</li>
<li><strong>PLM</strong> 3D模型渲染类，可用于公司具体业务场景，例如模型渲染、部位贴图切换、灯光和背景设置、摄像头交互控制等</li>
<li>$plm 将PLM类挂载到window对象, 可通过 <code>new $plm(...)</code> 实例化</li>
</ul>
<h3 id="2-2-加载器的设计和扩展"><a href="#2-2-加载器的设计和扩展" class="headerlink" title="2.2 加载器的设计和扩展"></a>2.2 加载器的设计和扩展</h3><p>通过目录结构和整体结构可以看到，处理loading占用了结构的一部分，那为什么要专门花费结构资源来处理loading呢，有以下几个原因。</p>
<p>首先是sdk封装的要求。整个项目最终要导出的是一个js格式的通用的sdk文件，方便具体的项目去使用。因此涉及到loading的页面结构和页面样式的逻辑，我们也是需要用js去实现的。</p>
<p>其次是为了用户体验。由于模型文件通常体积较大，用户电脑的CPU/GPU配置也各不相同，导致模型实例化时会产生两个异步过程，即加载过程和渲染过程，这两个过程所占用时间是用户可以直观感知的，需要loading在这两个期间起到引导和反馈的作用。</p>
<p>最后，loading功能模块和我们的sdk核心功能是整体分离但局部耦合的。模型渲染完毕前后，是分别需要一个<code>start</code>和<code>finish</code>的回调，这些回调是被<code>Babylon</code>耦合在加载动画中的，所以我们要通过<code>CustomLoadingScreen</code>类来控制这个异步回调发起的时机。而在加载过程和渲染初始化过程结束后，loading相关的DOM资源会被移除，相关逻辑终止，不参与我们后续的模型渲染进程，因此是整体分离的。参考以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PLM.render 将模型加载开始和渲染结束的回调暴露出来，即 cbStart 和 cbFinished</span></span><br><span class="line">engine.<span class="property">loadingScreen</span> = <span class="keyword">new</span> <span class="title class_">CustomLoadingScreen</span>(<span class="string">&#x27;loading&#x27;</span>, config.<span class="property">loading</span>, cbStart, cbFinished)</span><br></pre></td></tr></table></figure>

<p>loading效果是一张gif图，这个图片是先转成base64格式存储在<code>/src/loadingBase64.js</code>中，再引入到 <code>CustomLoadingScreen</code>的构造函数中使用。loading的尺寸、位置等css信息，通过<code>defaultLoadingStyle</code>来控制。</p>
<p>在不同的项目中，对loading的要求也有不同。如一个页面渲染了n个模型也就对应有n个loading，或者要修改loading图或者位置、尺寸。对于这些需求，sdk提供了 <code>defaultLoadingId</code>参数，可在实例化时传入，最终被绑定至loading动画DOM的id属性上，即可随意控制了。</p>
<h1 id="三-使用说明"><a href="#三-使用说明" class="headerlink" title="三. 使用说明"></a>三. 使用说明</h1><hr>
<h2 id="1-准备模型文件"><a href="#1-准备模型文件" class="headerlink" title="1. 准备模型文件"></a>1. 准备模型文件</h2><p>首先要准备待渲染的模型文件，以及模型文件所在路径（相对路径和绝对路径均可）。</p>
<p>模型文件格式有很多，如 .obj .glb .gitf 等，由于模型文件普遍体积较大，推荐使用谷歌的 <code>Draco</code> 算法，可以将obj格式文件高度压缩且基本不失真，节省服务器空间并提高页面加载速度。此处以经过压缩的gltf为例，其gltf文件、bin文件和贴图需要放在同一目录下。其它格式模型文件大多单文件，只需切换Babylon提供的对应加载器即可。</p>
<p>![IMAGE](quiver-image-url/1D7B6DF6F3FCD6D1480AFEDA4C2B964C.jpg =678x513)</p>
<h2 id="2-引入sdk文件"><a href="#2-引入sdk文件" class="headerlink" title="2. 引入sdk文件"></a>2. 引入sdk文件</h2><p>可在html中直接通过script标签引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;xxxx/xxx/sdk.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可通过 import 引入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;xxxx/xxx/sdk.js&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-创建渲染节点"><a href="#3-创建渲染节点" class="headerlink" title="3. 创建渲染节点"></a>3. 创建渲染节点</h2><p>创建DOM节点，并提供id属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;three-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-编写配置项"><a href="#4-编写配置项" class="headerlink" title="4. 编写配置项"></a>4. 编写配置项</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置项</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;http://oss.xxxx.com/xxx/Gltf/5108755581552330579/&#x27;</span>,</span><br><span class="line">    <span class="attr">gltf</span>: <span class="string">&#x27;5108755581552330579.gltf&#x27;</span>,</span><br><span class="line">    <span class="comment">// scale: 0.7,</span></span><br><span class="line">    <span class="comment">// position: &#123;</span></span><br><span class="line">    <span class="comment">//     x: 0,</span></span><br><span class="line">    <span class="comment">//     y: 0.1</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="attr">background</span>: &#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://xxx.xxx.com/assets-3d/bg/3d/001.jpg&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">loading</span>: &#123;</span><br><span class="line">        <span class="attr">visible</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://xxx.xxx.com/xxx/loading.gif&#x27;</span>,</span><br><span class="line">        <span class="attr">background</span>: <span class="string">&#x27;#FFFFFF&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">groups</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置项配置信息如下</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>必填</th>
<th>类型</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td>是</td>
<td>String</td>
<td>模型文件路径，支持相对路径</td>
<td></td>
</tr>
<tr>
<td>gltf</td>
<td>是</td>
<td>Boolean</td>
<td>模型文件名</td>
<td></td>
</tr>
<tr>
<td>scale</td>
<td>否</td>
<td>Number</td>
<td>模型缩放比例</td>
<td></td>
</tr>
<tr>
<td>position</td>
<td>否</td>
<td>Object</td>
<td>模型初始化时相对容器中心点的位置</td>
<td></td>
</tr>
<tr>
<td>background</td>
<td>否</td>
<td></td>
<td>Object</td>
<td>默认背景，url为背景图地址</td>
</tr>
<tr>
<td>loading</td>
<td>否</td>
<td>Object</td>
<td>模型加载时的loading遮罩，url为中心动图地址，支持base64；background为遮罩背景色，支持rgb和HEX形式。</td>
<td></td>
</tr>
<tr>
<td>groups</td>
<td>是</td>
<td>Boolean</td>
<td>模型分组部位配置信息，由后端按照约定格式返回</td>
<td></td>
</tr>
</tbody></table>
<h2 id="5-渲染"><a href="#5-渲染" class="headerlink" title="5. 渲染"></a>5. 渲染</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置项</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;...&#125;</span><br><span class="line"><span class="comment">// 回调</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cbStart</span> () &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cbFinished</span> () &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cbSelect</span> (groupId, event, pointerX, pointerY) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实例化</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> plm = <span class="keyword">new</span> $plm()</span><br><span class="line">    plm.<span class="title function_">render</span>(<span class="string">&#x27;three-container&#x27;</span>, config, cbStart, cbFinished, cbSelect)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模型渲染成功效果图如下<br>![IMAGE](quiver-image-url/67E1A398FDA61714D259B088957CAF19.jpg =1275x801)</p>
<h1 id="四-API"><a href="#四-API" class="headerlink" title="四. API"></a>四. API</h1><hr>
<h2 id="1-Accessors"><a href="#1-Accessors" class="headerlink" title="1. Accessors"></a>1. Accessors</h2><table>
<thead>
<tr>
<th>属性名</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>autoRotation</td>
<td>Boolean</td>
<td>true</td>
<td>是否开启自动旋转</td>
</tr>
<tr>
<td>rotateSpeed</td>
<td>Number</td>
<td>0.1</td>
<td>自动旋转</td>
</tr>
<tr>
<td>lockScale</td>
<td>Boolean</td>
<td>false</td>
<td>是否锁定模型放缩视角</td>
</tr>
<tr>
<td>modScale</td>
<td>Number</td>
<td>PI/4</td>
<td>模型放缩比例</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启自动旋转</span></span><br><span class="line">plm.<span class="property">autoRotation</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭自动旋转</span></span><br><span class="line">plm.<span class="property">autoRotation</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调整旋转速度</span></span><br><span class="line">plm.<span class="property">rotateSpeed</span> = <span class="number">0.3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调整缩放比例 仅当 mod.lockScale 为true时有效</span></span><br><span class="line">plm.<span class="property">modScale</span> = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">8</span> <span class="comment">// 注意角度制和弧度制的换算</span></span><br></pre></td></tr></table></figure>

<h2 id="2-Methods"><a href="#2-Methods" class="headerlink" title="2. Methods"></a>2. Methods</h2><h3 id="plm-render"><a href="#plm-render" class="headerlink" title="plm.render"></a>plm.render</h3><p><strong>功能描述</strong></p>
<p>初始化模型并挂载DOM，配置回调函数</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>domId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>模型挂载的DOM容器</td>
</tr>
<tr>
<td>config</td>
<td>Object</td>
<td></td>
<td>是</td>
<td>模型配置项</td>
</tr>
<tr>
<td>cbStart</td>
<td>Function</td>
<td></td>
<td>否</td>
<td>模型资源加载开始的回调函数</td>
</tr>
<tr>
<td>cbFinished</td>
<td>Function</td>
<td></td>
<td>否</td>
<td>模型初始化结束的回调函数</td>
</tr>
<tr>
<td>cbSelect</td>
<td>Function</td>
<td></td>
<td>否</td>
<td>模型区域选中的回调函数</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;...&#125;</span><br><span class="line">plm.<span class="title function_">render</span>(<span class="string">&#x27;three-container&#x27;</span>, config1, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;finished&#x27;</span>)</span><br><span class="line">&#125;, <span class="function">(<span class="params">groupId, event, x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;选中区域ID&#x27;</span>, groupId)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击事件&#x27;</span>, event)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击位置坐标&#x27;</span>, x, y)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="plm-dispose"><a href="#plm-dispose" class="headerlink" title="plm.dispose"></a>plm.dispose</h3><p><strong>功能描述</strong></p>
<p>递归卸载模型以及模型内部的贴图、纹理等对象，释放内存</p>
<p><strong>参数</strong></p>
<p>无</p>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plm.<span class="title function_">dispose</span>()</span><br></pre></td></tr></table></figure>

<h3 id="plm-updateBackground"><a href="#plm-updateBackground" class="headerlink" title="plm.updateBackground"></a>plm.updateBackground</h3><blockquote>
<p>该方法内部对背景图生成做了优化处理。使用md5对传入的背景图做重复鉴别，若相同url的图片被多次设置时，并不会生成新的背景图Layer对象，而是直接使用第一个。由于用作背景图的图片资源通常精细度较高体积较大，这样处理可有效降低页面开销。</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>更换模型背景图</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>String</td>
<td></td>
<td>是</td>
<td>背景图的URL地址</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">&quot;http://hesheng-zhizao-1306339461.cos.ap-guangzhou.myqcloud.com/test/erp/threeDReal/background/pc/097e5-1c62-45de-beb.jpg&quot;</span></span><br><span class="line">mod.<span class="title function_">updateBackground</span>(url)</span><br></pre></td></tr></table></figure>

<h3 id="plm-updateAttrInMaterial"><a href="#plm-updateAttrInMaterial" class="headerlink" title="plm.updateAttrInMaterial"></a>plm.updateAttrInMaterial</h3><blockquote>
<p>材料ID可在配置项中的 groups 内获取，也可调用 exportGroups、 getMaterialInGroup 等导出功能相关函数获取材料信息，再直接使用材料对象的id属性</p>
</blockquote>
<blockquote>
<p>支持修改的属性名以及对应属性值，可在附录中查看</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>更改材料配置参数</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>String</td>
<td></td>
<td>是</td>
<td>材料id</td>
</tr>
<tr>
<td>attrKey</td>
<td>String</td>
<td></td>
<td>是</td>
<td>属性名</td>
</tr>
<tr>
<td>val</td>
<td>String|Number</td>
<td></td>
<td>是</td>
<td>属性值</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupId = <span class="string">&#x27;Silk_Chiffon_FRONT_2678&#x27;</span></span><br><span class="line"><span class="keyword">const</span> materialId = plm.<span class="title function_">getMaterialInGroup</span>(<span class="string">&#x27;Silk_Chiffon_FRONT_2678&#x27;</span>).<span class="property">id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更改材料反射光为红色</span></span><br><span class="line">plm.<span class="title function_">updateAttrInMaterial</span>(materialId, <span class="string">&#x27;albedoColor&#x27;</span>, <span class="string">&#x27;#FF0000&#x27;</span>)</span><br><span class="line"><span class="comment">// 修改材料透明度为10%</span></span><br><span class="line">plm.<span class="title function_">updateAttrInMaterial</span>(materialId, <span class="string">&#x27;alpha&#x27;</span>, <span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<h3 id="plm-updateAttrInTexture"><a href="#plm-updateAttrInTexture" class="headerlink" title="plm.updateAttrInTexture"></a>plm.updateAttrInTexture</h3><blockquote>
<p>材料ID获取方式与上文updateAttrInMaterial相同，不再赘述</p>
</blockquote>
<blockquote>
<p>贴图类型合法值有六种 albedoTexture, bumpTexture, emissiveTexture, ambientTexture, opacityTexture, metallicTexture 具体信息见附录</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>更改纹理贴图配置参数</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>String</td>
<td></td>
<td>是</td>
<td>材料id</td>
</tr>
<tr>
<td>textureType</td>
<td>String</td>
<td></td>
<td>是</td>
<td>贴图类型</td>
</tr>
<tr>
<td>attrKey</td>
<td>String</td>
<td></td>
<td>是</td>
<td>属性名</td>
</tr>
<tr>
<td>val</td>
<td>String|Number</td>
<td></td>
<td>是</td>
<td>属性值</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupId = <span class="string">&#x27;Silk_Chiffon_FRONT_2678&#x27;</span></span><br><span class="line"><span class="keyword">const</span> materialId = plm.<span class="title function_">getMaterialInGroup</span>(<span class="string">&#x27;Silk_Chiffon_FRONT_2678&#x27;</span>).<span class="property">id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更改基本贴图的横向缩放比例为6</span></span><br><span class="line">plm.<span class="title function_">updateAttrInTexture</span>(id, <span class="string">&#x27;albedoTexture&#x27;</span>, <span class="string">&#x27;uScale&#x27;</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更改法线贴图的纵向缩放比例为16</span></span><br><span class="line">plm.<span class="title function_">updateAttrInTexture</span>(id, <span class="string">&#x27;bumpTexture&#x27;</span>, <span class="string">&#x27;vScale&#x27;</span>, <span class="number">16</span>)</span><br></pre></td></tr></table></figure>

<h3 id="plm-enableHighlight"><a href="#plm-enableHighlight" class="headerlink" title="plm.enableHighlight"></a>plm.enableHighlight</h3><p><strong>功能描述</strong></p>
<p>启用/关闭选区高亮功能，并设置高亮颜色</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>enable</td>
<td>Boolean</td>
<td></td>
<td>是</td>
<td>开启或关闭高亮功能</td>
</tr>
<tr>
<td>color</td>
<td>String</td>
<td><code>#00FF00</code></td>
<td>否</td>
<td>高亮颜色</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启用高亮，并设置高亮色为红色</span></span><br><span class="line">plm.<span class="title function_">enableHighlight</span>(<span class="literal">true</span>, <span class="string">&#x27;#FF0000&#x27;</span>)</span><br><span class="line"><span class="comment">// 禁用高亮</span></span><br><span class="line">plm.<span class="title function_">enableHighlight</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h3 id="plm-highlightGroup"><a href="#plm-highlightGroup" class="headerlink" title="plm.highlightGroup"></a>plm.highlightGroup</h3><p><strong>功能描述</strong></p>
<p>高亮指定区域</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>区域id</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 高亮第一个分组区域</span></span><br><span class="line"><span class="keyword">const</span> groups = plm.<span class="title function_">exportGroups</span>()</span><br><span class="line"><span class="keyword">if</span> (groups.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> groupId = groups[<span class="number">0</span>].<span class="property">groupId</span></span><br><span class="line">    plm.<span class="title function_">highlightGroup</span>(groupId)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="plm-clearHighlight"><a href="#plm-clearHighlight" class="headerlink" title="plm.clearHighlight"></a>plm.clearHighlight</h3><p><strong>功能描述</strong></p>
<p>取消模型所有区域高亮状态</p>
<p><strong>参数</strong></p>
<p>无</p>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plm.<span class="title function_">clearHighlight</span>()</span><br></pre></td></tr></table></figure>

<h3 id="plm-updateGroupMaterialV2"><a href="#plm-updateGroupMaterialV2" class="headerlink" title="plm.updateGroupMaterialV2"></a>plm.updateGroupMaterialV2</h3><blockquote>
<p>updateGroupMaterial 第一版本已经废弃，后续使用 updateGroupMaterialV2</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>更改区域分组材料</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>分组ID</td>
</tr>
<tr>
<td>options</td>
<td>Object:Options</td>
<td></td>
<td>是</td>
<td>材料生成配置项</td>
</tr>
</tbody></table>
<p><strong>Options</strong></p>
<table>
<thead>
<tr>
<th>Options属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>uid</td>
<td>String</td>
<td>自动生成</td>
<td>否</td>
<td>面料id</td>
</tr>
<tr>
<td>alpha</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>不透明度</td>
</tr>
<tr>
<td>metallic</td>
<td>Number</td>
<td>0</td>
<td>否</td>
<td>金属度</td>
</tr>
<tr>
<td>roughness</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>粗糙度</td>
</tr>
<tr>
<td>emissiveIntensity</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>发光强度</td>
</tr>
<tr>
<td>directIntensity</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>平行光强度</td>
</tr>
<tr>
<td>ambientTextureStrength</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>环境遮罩贴图强度</td>
</tr>
<tr>
<td>albedoColor</td>
<td>String</td>
<td><code>#FFFFFF</code></td>
<td>否</td>
<td>基础反射光</td>
</tr>
<tr>
<td>clearCoat</td>
<td>Object:ClearCoat</td>
<td></td>
<td>否</td>
<td>透明涂层设置</td>
</tr>
<tr>
<td>albedoTexture</td>
<td>Object:Texture</td>
<td></td>
<td>是</td>
<td>基本贴图设置</td>
</tr>
<tr>
<td>bumpTexture</td>
<td>Object:Texture</td>
<td></td>
<td>否</td>
<td>法线贴图设置</td>
</tr>
<tr>
<td>emissiveTexture</td>
<td>Object:Texture</td>
<td></td>
<td>否</td>
<td>反射贴图设置</td>
</tr>
<tr>
<td>ambientTexture</td>
<td>Object:Texture</td>
<td></td>
<td>否</td>
<td>环境反射贴图设置</td>
</tr>
<tr>
<td>opacityTexture</td>
<td>Object:Texture</td>
<td></td>
<td>否</td>
<td>透明贴图设置</td>
</tr>
<tr>
<td>metallicTexture</td>
<td>Object:Texture</td>
<td></td>
<td>否</td>
<td>金属纹理贴图设置</td>
</tr>
</tbody></table>
<p><strong>ClearCoat</strong></p>
<table>
<thead>
<tr>
<th>ClearCoat属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>isEnabled</td>
<td>Boolean</td>
<td>false</td>
<td>否</td>
<td>是否启用透明涂层</td>
</tr>
<tr>
<td>intensity</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>透明涂层强度</td>
</tr>
<tr>
<td>roughness</td>
<td>Number</td>
<td>1</td>
<td>否</td>
<td>透明涂层粗糙度</td>
</tr>
<tr>
<td>indiceOfRefraction</td>
<td>Number</td>
<td>1.5</td>
<td>否</td>
<td>透明涂层折射指数</td>
</tr>
</tbody></table>
<p><strong>Texture</strong></p>
<table>
<thead>
<tr>
<th>Texture属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>String</td>
<td></td>
<td>是</td>
<td>贴图文件资源地址</td>
</tr>
<tr>
<td>hasAlpha</td>
<td>Boolean</td>
<td>false</td>
<td>否</td>
<td>是否展示贴图alpha值</td>
</tr>
<tr>
<td>uScale</td>
<td>Number</td>
<td>80</td>
<td>否</td>
<td>横向缩放倍数</td>
</tr>
<tr>
<td>vScale</td>
<td>Number</td>
<td>80</td>
<td>否</td>
<td>纵向缩放倍数</td>
</tr>
<tr>
<td>wAng</td>
<td>Number</td>
<td>0</td>
<td>否</td>
<td>中心旋转角度</td>
</tr>
<tr>
<td>uAng</td>
<td>Number</td>
<td>0</td>
<td>否</td>
<td>上下旋转角度</td>
</tr>
<tr>
<td>vAng</td>
<td>Number</td>
<td>0</td>
<td>否</td>
<td>左右旋转角度</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupId = <span class="string">&#x27;......&#x27;</span></span><br><span class="line"><span class="keyword">const</span> materialConfig = &#123;</span><br><span class="line">    <span class="attr">uid</span>: <span class="string">&#x27;xxxxxxx&#x27;</span>,</span><br><span class="line">    <span class="attr">albedoTexture</span>: &#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://xxxx/xxx/xx.jpg&#x27;</span>,</span><br><span class="line">        <span class="attr">uScale</span>: <span class="number">80</span>,</span><br><span class="line">        <span class="attr">vScale</span>: <span class="number">80</span>,</span><br><span class="line">        <span class="attr">wAng</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">uAng</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">vAng</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">hasAlpha</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">alpha</span>: <span class="number">0.5</span>,</span><br><span class="line">    <span class="attr">albedoColor</span>: <span class="string">&#x27;#FF0000&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plm.<span class="title function_">updateGroupMaterialV2</span>(groupId, materialConfig)</span><br></pre></td></tr></table></figure>

<h3 id="plm-resetGroupMaterial"><a href="#plm-resetGroupMaterial" class="headerlink" title="plm.resetGroupMaterial"></a>plm.resetGroupMaterial</h3><p><strong>功能描述</strong></p>
<p>还原分组默认面料</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>分组ID</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupId = <span class="string">&#x27;xxxxx&#x27;</span></span><br><span class="line">plm.<span class="title function_">resetGroupMaterial</span>(groupId)</span><br></pre></td></tr></table></figure>

<h3 id="plm-selectGroup"><a href="#plm-selectGroup" class="headerlink" title="plm.selectGroup"></a>plm.selectGroup</h3><blockquote>
<p>选中分组区域后会伴有高亮效果，同时触发render函数的 cbSelect 回调。</p>
</blockquote>
<blockquote>
<p>选中分组区域有两种方式，即交互式触发和编程式触发。交互式即用户鼠标点击模型的指定区域触发；编程式不需要鼠标点击，因此可利用本方法实现具体的定制业务逻辑。</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>编程式选中分组区域</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>分组ID</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupId = <span class="string">&#x27;xxxxx&#x27;</span></span><br><span class="line">plm.<span class="title function_">selectGroup</span>(groupId)</span><br></pre></td></tr></table></figure>


<h3 id="plm-getMaterialInGroup"><a href="#plm-getMaterialInGroup" class="headerlink" title="plm.getMaterialInGroup"></a>plm.getMaterialInGroup</h3><p><strong>功能描述</strong></p>
<p>打印指定区域分组的材料对象</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>是</td>
<td>区域分组ID</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groups = plm.<span class="title function_">exportGroups</span>()</span><br><span class="line"><span class="keyword">if</span> (groups.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> groupId = groups[<span class="number">0</span>].<span class="property">groupId</span></span><br><span class="line">    <span class="keyword">const</span> metarial = plm.<span class="title function_">getMaterialInGroup</span>(groupId)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(metarial)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="plm-exportGroups"><a href="#plm-exportGroups" class="headerlink" title="plm.exportGroups"></a>plm.exportGroups</h3><blockquote>
<p>返回的分组信息列表为深拷贝，其格式见附录</p>
</blockquote>
<p><strong>功能描述</strong></p>
<p>打印分组信息</p>
<p><strong>参数</strong></p>
<p>无</p>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plm.<span class="title function_">exportGroups</span>()</span><br></pre></td></tr></table></figure>

<h3 id="plm-resetCamera"><a href="#plm-resetCamera" class="headerlink" title="plm.resetCamera"></a>plm.resetCamera</h3><p><strong>功能描述</strong></p>
<p>重置视角</p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>radius</td>
<td>Number</td>
<td>模型初始距离</td>
<td>否</td>
<td>相机与模型距离</td>
</tr>
</tbody></table>
<p><strong>示例代码</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重置视角 距离为模型最适距离</span></span><br><span class="line">plm.<span class="title function_">resetCamera</span>()</span><br><span class="line"><span class="comment">// 重置视角 距离为自定义距离</span></span><br><span class="line">plm.<span class="title function_">resetCamera</span>(<span class="number">1.2</span>)</span><br></pre></td></tr></table></figure>

<h1 id="五-附录"><a href="#五-附录" class="headerlink" title="五. 附录"></a>五. 附录</h1><h2 id="1-材料配置参数"><a href="#1-材料配置参数" class="headerlink" title="1. 材料配置参数"></a>1. 材料配置参数</h2><table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>albedoColor</td>
<td>String</td>
<td>#FFFFFF</td>
<td><code>#000000 ~ #FFFFFF</code></td>
<td>基本反射颜色，任意hex颜色码均可</td>
</tr>
<tr>
<td>alpha</td>
<td>Number</td>
<td>1</td>
<td><code>[0, 1]</code></td>
<td>alpha值，取0时全透，取1时不透明</td>
</tr>
</tbody></table>
<h2 id="2-材料贴图类型"><a href="#2-材料贴图类型" class="headerlink" title="2. 材料贴图类型"></a>2. 材料贴图类型</h2><table>
<thead>
<tr>
<th>编码</th>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>albedoTexture</td>
<td></td>
<td></td>
</tr>
<tr>
<td>bumpTexture</td>
<td></td>
<td></td>
</tr>
<tr>
<td>emissiveTexture</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ambientTexture</td>
<td></td>
<td></td>
</tr>
<tr>
<td>opacityTexture</td>
<td></td>
<td></td>
</tr>
<tr>
<td>metallicTexture</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="3-纹理贴图配置参数"><a href="#3-纹理贴图配置参数" class="headerlink" title="3. 纹理贴图配置参数"></a>3. 纹理贴图配置参数</h2><table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>默认值</th>
<th>取值范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>String</td>
<td></td>
<td></td>
<td>贴图地址</td>
</tr>
<tr>
<td>uScale</td>
<td>Number</td>
<td>80</td>
<td><code>[1, 100]</code></td>
<td>横向缩放倍数</td>
</tr>
<tr>
<td>vScale</td>
<td>Number</td>
<td>80</td>
<td><code>[1, 100]</code></td>
<td>纵向缩放倍数</td>
</tr>
<tr>
<td>wAng</td>
<td>Number</td>
<td>0</td>
<td><code>[0, 360]</code></td>
<td>中心旋转角度</td>
</tr>
<tr>
<td>uAng</td>
<td>Number</td>
<td>0</td>
<td><code>[0, 360]</code></td>
<td>上下旋转角度</td>
</tr>
<tr>
<td>vAng</td>
<td>Number</td>
<td>0</td>
<td><code>[0, 360]</code></td>
<td>左右旋转角度</td>
</tr>
<tr>
<td>hasAlpha</td>
<td>BOOlean</td>
<td>false</td>
<td>true/false</td>
<td>开启贴图alpha模式，在url图片为png时有效</td>
</tr>
</tbody></table>
<h2 id="4-分组信息打印格式-Array-lt-GroupInfo-gt"><a href="#4-分组信息打印格式-Array-lt-GroupInfo-gt" class="headerlink" title="4. 分组信息打印格式 Array&lt;GroupInfo&gt;"></a>4. 分组信息打印格式 Array&lt;GroupInfo&gt;</h2><ul>
<li>GroupInfo 可通过配置项config内的groups参数配置</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>groupId</td>
<td>String</td>
<td></td>
<td>分组ID</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td></td>
<td>组别名称，未取值时和groupId一致</td>
</tr>
<tr>
<td>isShow</td>
<td>String</td>
<td>0-不展示 1-展示</td>
<td>是否展示</td>
</tr>
<tr>
<td>meshes</td>
<td>Array&lt;MeshInfo&gt;</td>
<td></td>
<td>三维面列表</td>
</tr>
</tbody></table>
<ul>
<li>MeshInfo 在建模过程中由建模师设置</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>String</td>
<td></td>
<td>分组ID</td>
</tr>
<tr>
<td>isVisible</td>
<td>BOOlean</td>
<td>true/false</td>
<td>面是否展示</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td></td>
<td>面名称</td>
</tr>
<tr>
<td>uniqueId</td>
<td>Number</td>
<td></td>
<td>uid</td>
</tr>
</tbody></table>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/07/21/3d/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/07/21/hello-world/"
                            aria-label=": Hello World"
                        >
                            Hello World
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-07-21T11:02:10+08:00">
	
		    Jul 21, 2022
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/07/21/hello-world/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a
                href="/2022/07/21/hello-world/"
                aria-label=": Hello World"
            >
                <div class="postShorten-thumbnailimg">
                    <img alt="" src=""/>
                </div>
            </a>
            
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 Moran. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/zhen.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Moran</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                GuangZhou
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-jbvqsksczqzxuy9utybzyxqod4hdpslxo1c2wvfa4jzbmyuyh4crgaqfmxyv.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
